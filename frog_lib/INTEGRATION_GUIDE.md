"""
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë           BioFrog v2.0 - –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ü–û –ò–ù–¢–ï–ì–†–ê–¶–ò–ò –ò –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ       ‚ïë
‚ïë      –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –µ–¥–∏–Ω—ã–π –∞–≥–µ–Ω—Ç            ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
"""

# =============================================================================
# üìå –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢
# =============================================================================

"""
–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

    from bio_frog_v2 import BioFlyCatchingSimulation
    
    # –°–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é
    sim = BioFlyCatchingSimulation(
        width=800, 
        height=600,
        bio_mode=True,
        juvenile_mode=True  # ‚Üê –†–ï–ñ–ò–ú –î–ï–¢–°–¢–í–ê
    )
    sim.run_simulation(max_steps=5000)
    sim.plot_results()

–≠—Ç–æ –≤—Å—ë! –õ—è–≥—É—à–∫–∞ –Ω–∞—á–Ω—ë—Ç –æ—Ö–æ—Ç–∏—Ç—å—Å—è –Ω–∞ –º—É—Ö —Å –ø–æ–ª–Ω–æ–π –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π —Å–µ—Ç—å—é!
"""


# =============================================================================
# üß† –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò–ù–¢–ï–ì–†–ê–¶–ò–ò
# =============================================================================

"""
BioFrogAgent –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ —ç—Ç–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

1Ô∏è‚É£ –°–ï–ù–°–û–†–ù–´–ô –í–í–û–î
   visual_scene (800√ó600) 
        ‚Üì
   RetinalProcessing (10√ó10 —Ñ–∏–ª—å—Ç—Ä–æ–≤ ON/OFF)
        ‚Üì
   retinal_output (100 –Ω–µ–π—Ä–æ–Ω–æ–≤)

2Ô∏è‚É£ –¶–ï–ù–¢–†–ê–õ–¨–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê
   retinal_output + motion_vectors
        ‚Üì
   Tectum (16 –∫–æ–ª–æ–Ω–æ–∫, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
        ‚Üì
   tectal_output + movement_command

3Ô∏è‚É£ –ú–û–¢–û–†–ù–´–ô –í–´–•–û–î
   movement_command
        ‚Üì
   MotorHierarchy (executive ‚Üí coordination ‚Üí motor)
        ‚Üì
   muscle_activation (—Å–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è)

4Ô∏è‚É£ –ù–ï–ô–†–û–ú–û–î–£–õ–Ø–¶–ò–Ø
   reward_signal ‚Üí dopamine (+0.3)
   neural_activity ‚Üí serotonin
   energy_level ‚Üí fatigue
   
   –í —Ä–µ–∂–∏–º–µ –¥–µ—Ç—Å—Ç–≤–∞:
   - dopamine: 0.85 (–≤–º–µ—Å—Ç–æ 0.5)
   - serotonin: 0.75 (–≤–º–µ—Å—Ç–æ 0.5)
   
5Ô∏è‚É£ –ú–ï–¢–ê–ë–û–õ–ò–ó–ú
   movement_intensity + neural_activity
        ‚Üì
   SystemicMetabolism (glucose, oxygen, fatigue)
        ‚Üì
   energy_level

6Ô∏è‚É£ –ü–õ–ê–°–¢–ò–ß–ù–û–°–¢–¨
   neural_activity
        ‚Üì
   FunctionalPlasticityManager (–≥–æ–º–µ–æ—Å—Ç–∞–∑)
   StructuralPlasticityManager (—Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å–∏–Ω–∞–ø—Å–æ–≤)
        ‚Üì
   –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ synaptic_weights
"""


# =============================================================================
# üë∂ –†–ï–ñ–ò–ú "–î–ï–¢–°–¢–í–ê" (JUVENILE MODE)
# =============================================================================

"""
–î–µ—Ç—Å—Ç–≤–æ - —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –ø–µ—Ä–∏–æ–¥ —Ä–∞–∑–≤–∏—Ç–∏—è, –≥–¥–µ:

‚úì –ü–û–í–´–®–ï–ù–ù–ê–Ø –ù–ï–ô–†–û–ú–û–î–£–õ–Ø–¶–ò–Ø:
  - –î–æ—Ñ–∞–º–∏–Ω: 0.85 ‚Üí —Å—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –æ–±—É—á–µ–Ω–∏–µ
  - –°–µ—Ä–æ—Ç–æ–Ω–∏–Ω: 0.75 ‚Üí —É–ª—É—á—à–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –æ–±—É—á–µ–Ω–∏–µ
  - –ù–æ—Ä–º. –≤–∑—Ä–æ—Å–ª–µ: dopamine=0.5, serotonin=0.5

‚úì –û–ë–õ–ï–ì–ß–Å–ù–ù–ê–Ø –û–•–û–¢–ê:
  - –†–∞–¥–∏—É—Å –ø–æ–∏–º–∫–∏: 100 –ø–∏–∫—Å–µ–ª–µ–π (–≤–º–µ—Å—Ç–æ 20)
  - –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞: 60% (–≤–º–µ—Å—Ç–æ 100%)
  - –≠—Ç–æ –¥–∞—ë—Ç –ª—è–≥—É—à–∫–µ —à–∞–Ω—Å –ø–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—ã–µ —É—Å–ø–µ—Ö–∏

‚úì –î–õ–ò–¢–ï–õ–¨–ù–û–°–¢–¨:
  - juvenile_duration = 5000 —à–∞–≥–æ–≤
  - –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ª—è–≥—É—à–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∑—Ä–æ—Å–ª–æ–π

‚úì –ë–ò–û–õ–û–ì–ò–ß–ï–°–ö–û–ï –û–ë–û–°–ù–û–í–ê–ù–ò–ï:
  - –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –º–æ–ª–æ–¥—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ –∏–º–µ—é—Ç –ø–æ–≤—ã—à–µ–Ω–Ω—ã–π –¥–æ—Ñ–∞–º–∏–Ω
  - –≠—Ç–æ —Å—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç –∏–≥—Ä—É –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
  - –ü–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –æ–±—É—á–∏—Ç—å—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –Ω–∞–≤—ã–∫–∞–º

–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï:
    # –†–µ–∂–∏–º –¥–µ—Ç—Å—Ç–≤–∞
    sim = BioFlyCatchingSimulation(juvenile_mode=True)
    
    # –ë–µ–∑ —Ä–µ–∂–∏–º–∞ –¥–µ—Ç—Å—Ç–≤–∞ (—Å—Ä–∞–∑—É –≤–∑—Ä–æ—Å–ª–∞—è)
    sim = BioFlyCatchingSimulation(juvenile_mode=False)
"""


# =============================================================================
# üìä –ü–ê–†–ê–ú–ï–¢–†–´ –ò –ö–û–ù–°–¢–ê–ù–¢
# =============================================================================

"""
–ù–ï–ô–†–û–ù–´:
  - LIFNeuron: tau_membrane=20ms, threshold=-40mV
  - PyramidalNeuron: –¥–µ–Ω–¥—Ä–∏—Ç–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, –∞–ø–∏–∫–∞–ª—å–Ω–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ
  - FastSpikingInterneuron: tau=5ms, –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Å–ø–∞–π–∫–∞–º

–°–ò–ù–ê–ü–°–´:
  - STDP –æ–∫–Ω–æ: ¬±50 ms
  - STDP –∞–º–ø–ª–∏—Ç—É–¥–∞: 0.01
  - –ú–æ–¥—É–ª—è—Ü–∏—è: dopamine & serotonin
  - STP: facilitation (50ms), depression (200ms)

–ì–õ–ò–Ø:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 24 –∞—Å—Ç—Ä–æ—Ü–∏—Ç–∞ –≤ —Å–µ—Ç–∫–µ 4√ó6
  - –ö–∞–ª—å—Ü–∏–µ–≤–∞—è –¥–∏–Ω–∞–º–∏–∫–∞: tau=500ms
  - –í–ª–∏—è–Ω–∏–µ: radius=50.0 –ø–∏–∫—Å–µ–ª–µ–π

–ú–ï–¢–ê–ë–û–õ–ò–ó–ú:
  - –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –≥–ª—é–∫–æ–∑—ã: 0.001/s
  - –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∫–∏—Å–ª–æ—Ä–æ–¥–∞: 0.0015/s
  - –¶–∏—Ä–∫–∞–¥–Ω—ã–π —Ü–∏–∫–ª: ~2.8 —á–∞—Å–æ–≤ (–≤ —Å–∏–º—É–ª—è—Ü–∏–∏: 10000 —à–∞–≥–æ–≤)
  - ATP –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –Ω–∞ —Å–ø–∞–π–∫: 0.1 –µ–¥–∏–Ω–∏—Ü

–†–ê–ó–†–ê–ë–û–¢–ö–ê:
  - –†–µ—Ñ—Ä–∞–∫—Ç–µ—Ä–Ω—ã–π –ø–µ—Ä–∏–æ–¥: 1-2 ms
  - –î–µ–ª—å—Ç–∞-–≤—Ä–µ–º–µ–Ω–∏: 0.01 ms
  - –¶–µ–ª–µ–≤–æ–π FPS: 30-60

–î–ò–§–§–£–ó–ò–Ø:
  - –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–µ—Ç–∫–∏: 20√ó20
  - –ì–∞—É—Å—Å–æ–≤ —è–¥—Ä–æ –¥–ª—è –¥–∏—Ñ—Ñ—É–∑–∏–∏
  - Exponential decay: tau=500ms

–¢–ï–ö–¢–£–ú:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫: 16
  - –ü–æ–∫—Ä—ã—Ç–∏–µ: 0¬∞ –¥–æ 360¬∞ (22.5¬∞ —à–∞–≥)
  - –ù–µ–π—Ä–æ–Ω—ã –Ω–∞ –∫–æ–ª–æ–Ω–∫—É: 14 (8 pyr + 4 intern + 2 output)
  - –°–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: œÉ=0.5 rad

–ú–û–¢–û–†–ù–ê–Ø –ò–ï–†–ê–†–•–ò–Ø:
  - –°–ª–æ–π 1 (executive): 4 –Ω–µ–π—Ä–æ–Ω–∞ (UP, DOWN, LEFT, RIGHT)
  - –°–ª–æ–π 2 (coordination): 8 –∏–Ω—Ç–µ—Ä–Ω–µ–π—Ä–æ–Ω–æ–≤
  - –°–ª–æ–π 3 (motor): 12 –Ω–µ–π—Ä–æ–Ω–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—ã—à—Ü–∞–º–∏
"""


# =============================================================================
# üîÑ –û–°–ù–û–í–ù–´–ï –ú–ï–¢–û–î–´
# =============================================================================

"""
BioFrogAgent:
  __init__(space, position, bio_mode=True, juvenile_mode=True, ...)
    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–∞ —Å –ø–æ–ª–Ω–æ–π –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π —Å–µ—Ç—å—é
  
  update(dt, flies) ‚Üí Dict[str, Any]
    –û–¥–∏–Ω —Ü–∏–∫–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–∑–≥–∞ –∏ —Ç–µ–ª–∞
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: position, velocity, energy, caught_flies, dopamine, ...
  
  detect_flies(flies) ‚Üí (visual_scene, motion_vectors)
    –û–±–Ω–∞—Ä—É–∂–∏—Ç—å –º—É—Ö –≤ –≤–∏–∑—É–∞–ª—å–Ω–æ–º –ø–æ–ª–µ
  
  extend_tongue(target_position)
    –í—ã–ø—É—Å—Ç–∏—Ç—å —è–∑—ã–∫
  
  retract_tongue()
    –í—Ç—è–Ω—É—Ç—å —è–∑—ã–∫

BioFrogBrain:
  process_sensory_input(visual_scene) ‚Üí Dict
    –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ —Å–µ—Ç—á–∞—Ç–∫—É
  
  process_motion(retinal_input, motion_vectors) ‚Üí Dict
    –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Ç–µ–∫—Ç—É–º
  
  generate_motor_output(movement_command) ‚Üí Dict
    –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–∞
  
  update_neuromodulation(reward, neural_activity, dt)
    –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Ñ–∞–º–∏–Ω–∞ –∏ —Å–µ—Ä–æ—Ç–æ–Ω–∏–Ω–∞
  
  apply_plasticity(neural_activity)
    –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–ª–∞—Å—Ç–∏—á–Ω–æ—Å—Ç–∏ —Å–∏–Ω–∞–ø—Å–æ–≤
  
  update_metabolism(movement_intensity, neural_activity, dt)
    –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –∏ –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞

BioFlyCatchingSimulation:
  __init__(width, height, bio_mode=True, juvenile_mode=True, ...)
    –°–æ–∑–¥–∞—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é
  
  run_simulation(max_steps)
    –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤
  
  plot_results()
    –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  
  get_statistics() ‚Üí Dict
    –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
  
  reset_simulation()
    –°–±—Ä–æ—Å–∏—Ç—å –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é
  
  close()
    –ó–∞–∫—Ä—ã—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é
"""


# =============================================================================
# üìà –í–û–ó–í–†–ê–©–ê–ï–ú–´–ï –ó–ù–ê–ß–ï–ù–ò–Ø
# =============================================================================

"""
agent.update() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Dict —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:

{
    'position': (x, y),              # –ü–æ–∑–∏—Ü–∏—è –ª—è–≥—É—à–∫–∏
    'velocity': (vx, vy),            # –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è
    'energy': 0.5,                   # –£—Ä–æ–≤–µ–Ω—å —ç–Ω–µ—Ä–≥–∏–∏ (0-1)
    'caught_flies': 5,               # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–π–º–∞–Ω–Ω—ã—Ö –º—É—Ö
    'dopamine': 0.75,                # –£—Ä–æ–≤–µ–Ω—å –¥–æ—Ñ–∞–º–∏–Ω–∞ (0-1)
    'serotonin': 0.65,               # –£—Ä–æ–≤–µ–Ω—å —Å–µ—Ä–æ—Ç–æ–Ω–∏–Ω–∞ (0-1)
    'fatigue': 0.3,                  # –£—Å—Ç–∞–ª–æ—Å—Ç—å (0-1)
    'is_juvenile': True,             # –í —Ä–µ–∂–∏–º–µ –¥–µ—Ç—Å—Ç–≤–∞?
    'juvenile_progress': 0.42,       # –ü—Ä–æ–≥—Ä–µ—Å—Å –¥–µ—Ç—Å—Ç–≤–∞ (0-1)
    'tongue_extended': False,        # –Ø–∑—ã–∫ –≤—ã–ø—É—â–µ–Ω?
    'tongue_length': 0.0,            # –î–ª–∏–Ω–∞ —è–∑—ã–∫–∞
    'neural_activity': 0.23,         # –°—Ä–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–µ–π—Ä–æ–Ω–æ–≤
    'reward': 0.0,                   # –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ —ç—Ç–æ–≥–æ —à–∞–≥–∞
    'caught_fly': fly_obj            # –ü–æ–π–º–∞–Ω–∞ –ª–∏ –º—É—Ö–∞
}
"""


# =============================================================================
# üß¨ –ë–ò–û–õ–û–ì–ò–ß–ï–°–ö–ê–Ø –í–ê–õ–ò–î–ê–¶–ò–Ø
# =============================================================================

"""
–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã BioFrog v2.0 –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –Ω–µ–π—Ä–æ–±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö:

‚úì –ù–ï–ô–†–û–ù–´:
  - LIF –º–æ–¥–µ–ª—å –∏–∑ Hodgkin-Huxley
  - –ú–µ–º–±—Ä–∞–Ω–Ω–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –≤—Ä–µ–º–µ–Ω–∏: 5-20ms (—Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
  - –†–µ—Ñ—Ä–∞–∫—Ç–µ—Ä–Ω—ã–π –ø–µ—Ä–∏–æ–¥: 1-2ms (—Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏)

‚úì –°–ò–ù–ê–ü–°–´:
  - STDP –∏–∑ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ Bi & Poo (1998)
  - –û–∫–Ω–æ ¬±50ms (–∑–æ–ª–æ—Ç–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç)
  - –ù–µ–π—Ä–æ–º–æ–¥—É–ª—è—Ü–∏—è –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

‚úì –ì–õ–ò–Ø:
  - –ö–∞–ª—å—Ü–∏–µ–≤–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ –∏–∑ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —Å –∞—Å—Ç—Ä–æ—Ü–∏—Ç–∞–º–∏
  - –ú–æ–¥—É–ª—è—Ü–∏—è —Å–∏–Ω–∞–ø—Å–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ (Parpura & Haydon)

‚úì –ú–ï–¢–ê–ë–û–õ–ò–ó–ú:
  - ATP –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –Ω–∞ —Å–ø–∞–π–∫: –∏–∑ –±–∏–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏
  - –¶–∏—Ä–∫–∞–¥–Ω—ã–µ —Ä–∏—Ç–º—ã: –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã –º–ª–µ–∫–æ–ø–∏—Ç–∞—é—â–∏—Ö
  - –£—Å—Ç–∞–ª–æ—Å—Ç—å –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫: —Ä–µ–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç

‚úì –†–ê–ó–í–ò–¢–ò–ï:
  - –î–µ—Ç—Å—Ç–≤–æ —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º –¥–æ—Ñ–∞–º–∏–Ω–æ–º: –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è –≤ –ø—Ä–∏—Ä–æ–¥–µ
  - –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –æ—Ö–æ—Ç–∞ –≤ –¥–µ—Ç—Å—Ç–≤–µ: —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è –∂–∏–≤–æ—Ç–Ω—ã—Ö
  - –ü–µ—Ä–µ—Ö–æ–¥ –≤–∑—Ä–æ—Å–ª–æ—Å—Ç–∏: —Ä–µ–∞–ª—å–Ω—ã–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã
"""


# =============================================================================
# ‚öôÔ∏è –ê–î–ê–ü–¢–ê–¶–ò–Ø –ü–ê–†–ê–ú–ï–¢–†–û–í
# =============================================================================

"""
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ª—è–≥—É—à–∫–∏:

1. –ò–ó–ú–ï–ù–ò–¢–¨ –°–ò–õ–£ –û–ë–£–ß–ï–ù–ò–Ø:
   # –í BioFrogBrain.__init__:
   self.dopamine_level = 0.9  # –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–µ –æ–±—É—á–µ–Ω–∏–µ
   
2. –ü–†–û–î–õ–ò–¢–¨ –î–ï–¢–°–¢–í–û:
   # –í BioFrogBrain.__init__:
   self.juvenile_duration = 10000  # –í–º–µ—Å—Ç–æ 5000

3. –ò–ó–ú–ï–ù–ò–¢–¨ –†–ê–î–ò–£–° –ü–û–ò–ú–ö–ò:
   # –í BioFrogAgent.__init__:
   self.hit_radius = 150.0  # –í–º–µ—Å—Ç–æ 100.0/20.0

4. –£–í–ï–õ–ò–ß–ò–¢–¨ –≠–ù–ï–†–ì–û–ü–û–¢–†–ï–ë–õ–ï–ù–ò–ï:
   # –í SystemicMetabolism.update():
   glucose_consumption = 0.002  # –í–º–µ—Å—Ç–æ 0.001

5. –£–°–ö–û–†–ò–¢–¨ –Ø–ó–´–ö:
   # –í BioFrogAgent.update():
   self.tongue_length += 400.0 * dt  # –í–º–µ—Å—Ç–æ 300.0
"""


# =============================================================================
# üöÄ –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø
# =============================================================================

"""
–ü–†–ò–ú–ï–† 1: –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫
    from bio_frog_v2 import BioFlyCatchingSimulation
    sim = BioFlyCatchingSimulation()
    sim.run_simulation(max_steps=5000)
    sim.close()

–ü–†–ò–ú–ï–† 2: –° —Ä–µ–∂–∏–º–æ–º –¥–µ—Ç—Å—Ç–≤–∞
    sim = BioFlyCatchingSimulation(
        juvenile_mode=True,  # –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –¥–µ—Ç—Å—Ç–≤–∞
        num_flies=20         # –ë–æ–ª—å—à–µ –º—É—Ö
    )
    sim.run_simulation(max_steps=10000)

–ü–†–ò–ú–ï–† 3: –ë–µ–∑ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (–±—ã—Å—Ç—Ä–æ)
    sim = BioFlyCatchingSimulation(
        headless=True,  # –ë–µ–∑ –æ–∫–Ω–∞ pygame
        num_flies=15
    )
    sim.run_simulation(max_steps=20000)
    stats = sim.get_statistics()

–ü–†–ò–ú–ï–† 4: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤
    for juvenile in [True, False]:
        sim = BioFlyCatchingSimulation(juvenile_mode=juvenile)
        sim.run_simulation(max_steps=5000)
        print(f"Juvenile={juvenile}: {sim.frog.caught_flies} flies")

–ü–†–ò–ú–ï–† 5: –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
    import pymunk
    from bio_frog_v2 import BioFrogAgent
    
    space = pymunk.Space()
    frog = BioFrogAgent(space, (400, 300), juvenile_mode=True)
    
    for step in range(1000):
        flies = [...]  # –°–ø–∏—Å–æ–∫ –º—É—Ö
        state = frog.update(dt=0.01, flies=flies)
        print(f"Energy: {state['energy']:.2f}")
"""


# =============================================================================
# üéØ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° –ò–°–•–û–î–ù–´–ú –ö–û–î–û–ú
# =============================================================================

"""
BioFrogAgent –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å –∏—Å—Ö–æ–¥–Ω—ã–º FrogAgent –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º:

–î–û (–∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥):
    agent = FrogAgent(space, position)
    state = agent.update(dt, flies)
    position = state['position']
    energy = state['energy']
    caught_flies = state['caught_flies']

–¢–ï–ü–ï–†–¨ (BioFrog v2.0):
    agent = BioFrogAgent(space, position, bio_mode=True, juvenile_mode=True)
    state = agent.update(dt, flies)
    position = state['position']
    energy = state['energy']
    caught_flies = state['caught_flies']
    
    # –ü–õ–Æ–° –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:
    dopamine = state['dopamine']
    serotonin = state['serotonin']
    is_juvenile = state['is_juvenile']
    neural_activity = state['neural_activity']

–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ, –Ω–æ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π!
"""


# =============================================================================
# üìä –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –ò –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø
# =============================================================================

"""
–ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:
  - –¶–µ–ª–µ–≤–æ–π FPS: 30-60 (—Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)
  - –ü–∞–º—è—Ç—å –Ω–∞ –∞–≥–µ–Ω—Ç–∞: ~10 MB
  - –í—Ä–µ–º—è —à–∞–≥–∞: 10-50 ms
  - –ú–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å 50+ –º—É—Ö –±–µ–∑ –ø—Ä–æ–±–ª–µ–º

–û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø:
  - NumPy –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
  - –†–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (20√ó20 —Å–µ—Ç–∫–∏)
  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
  - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

–ï–°–õ–ò –ú–ï–î–õ–ï–ù–ù–û:
  1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ headless=True (–±–µ–∑ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏)
  2. –£–º–µ–Ω—å—à–∏—Ç–µ num_flies
  3. –£–≤–µ–ª–∏—á—å—Ç–µ dt (—à–∞–≥ –≤—Ä–µ–º–µ–Ω–∏)
  4. –û—Ç–∫–ª—é—á–∏—Ç–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω—ã
"""


# =============================================================================
# üêõ –û–¢–õ–ê–î–ö–ê –ò –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê
# =============================================================================

"""
–ü–†–û–í–ï–†–ò–¢–¨ –°–û–°–¢–û–Ø–ù–ò–ï:
    print(frog.get_state())
    # –ü–æ–∫–∞–∂–µ—Ç: position, energy, caught_flies, dopamine, ...

–û–¢–°–õ–ï–î–ò–¢–¨ –û–ë–£–ß–ï–ù–ò–ï:
    print(frog.brain.dopamine_history)
    print(frog.brain.activity_history)

–í–ò–ó–£–ê–õ–ò–ó–ò–†–û–í–ê–¢–¨ –°–ï–¢–¨:
    sim.plot_results()
    # –ü–æ–∫–∞–∂–µ—Ç 4 –≥—Ä–∞—Ñ–∏–∫–∞: —ç–Ω–µ—Ä–≥–∏—è, –¥–æ—Ñ–∞–º–∏–Ω, —É—Å–ø–µ—Ö, —Ä–∞–∑–≤–∏—Ç–∏–µ

–°–û–•–†–ê–ù–ò–¢–¨ –°–û–°–¢–û–Ø–ù–ò–ï:
    sim.save_state('biofrog_checkpoint.json')

–ò–ó–ú–ï–†–ò–¢–¨ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:
    import time
    start = time.time()
    sim.run_simulation(5000)
    print(f"Time: {time.time()-start}s")
"""


# =============================================================================
# üîó –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
# =============================================================================

"""
–î–õ–Ø –ü–û–õ–ù–û–ô –ò–ù–§–û–†–ú–ê–¶–ò–ò –°–ú.:
  ‚Ä¢ bio_frog_v2/README_BIO_DETAILED.md - –ø–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞
  ‚Ä¢ bio_frog_v2/QUICKSTART.md - –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
  ‚Ä¢ bio_frog_v2/ARCHITECTURE_VISUALIZATION.md - –¥–∏–∞–≥—Ä–∞–º–º—ã
  ‚Ä¢ bio_frog_v2/examples.py - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã

–ù–ê–£–ß–ù–´–ï –°–°–´–õ–ö–ò:
  ‚Ä¢ STDP: Bi & Poo (1998) "Synaptic modifications in cultured hippocampal neurons"
  ‚Ä¢ LIF: Gerstner & Kistler "Spiking Neuron Models"
  ‚Ä¢ –ì–ª–∏—è: Parpura & Haydon "Glial contribution to synaptic plasticity"
  ‚Ä¢ –ú–µ—Ç–∞–±–æ–ª–∏–∑–º: Laughlin (2001) "Energy as a constraint on the evolution"
"""


# =============================================================================
# ‚ú® –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï
# =============================================================================

"""
BioFrog v2.0 –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –µ–¥–∏–Ω—ã–π,
–º–æ—â–Ω—ã–π –∏ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∞–≥–µ–Ω—Ç –æ—Ö–æ—Ç—ã.

–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
  ‚úì –ü–æ–ª–Ω–∞—è –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å
  ‚úì –†–µ–∂–∏–º "–¥–µ—Ç—Å—Ç–≤–∞" –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
  ‚úì 100% —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
  ‚úì –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (30-60 FPS)
  ‚úì –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
  ‚úì –†–∞—Å—à–∏—Ä—è–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ù–∞—á–Ω–∏—Ç–µ —Å QUICKSTART.md –∏–ª–∏ examples.py –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞!

–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ BioFrog v2.0! üß†üê∏‚ú®
"""
